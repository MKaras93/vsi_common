#!/usr/bin/env false
#Source this script for colors

function color_setup()
{
  local color

  # The 8 Colors
  COLORS=(BLACK RED GREEN YELLOW BLUE MAGENTA CYAN WHITE)
  BLACK=0
  RED=1
  GREEN=2
  YELLOW=3
  BLUE=4
  MAGENTA=5
  CYAN=6
  WHITE=7

  local _normal=30
  local _light=90
  local _bg=10
  local _reset=20

  RESET=$'\e[0m'
  NC=${RESET}
  BOLD=$'\e[1m'
  DIM=$'\e[2m'
  UNDERLINE=$'\e[4m'
  BLINK=$'\e[5m'
  REVERSE=$'\e[7m'
  HIDDEN=$'\e[8m'
  RESET_BOLD=$'\e[21m'
  RESET_DIM=$'\e[22m'
  RESET_UNDERLINE=$'\e[24m'
  RESET_BLINK=$'\e[25m'
  RESET_REVERSE=$'\e[27m'
  RESET_HIDDEN=$'\e[28m'

  for color in "${COLORS[@]}"; do
    eval "LIGHT_${color}=$'\e[$((${_light}+${!color}))m'"
    eval "${color}_BG=$'\e[$((${_bg}+${!color}))m'"
    eval "LIGHT_${color}_BG=$'\e[$((${_bg}+${_light}+${!color}))m'"
    eval "${color}=$'\e[$((${_normal}+${!color}))m'"
  done
}

function get_color()
{ #1 - colored name
  if [ "${COLORS[$1]+0}" == "0" ]; then
    COLOR[$1]=${_COLORS[$((${_COLOR_INDEX}%${#_COLORS[@]}))]}
    _COLOR_INDEX=$((${_COLOR_INDEX}+1))
  fi
  echo -n COLOR[$1]
}

#88/256 color support
function FG()
{
  echo -n $'\e[38;5;'$1m
}

function BG()
{
  echo -n $'\e[48;5;'$1m
}

function color_demo()
{
  local x
  echo "8 Colors"
  
  echo $'Color\tNormal\tBold\tDim\tU-line\tBlink\tReverse\tHidden'

  for x in "${COLORS[@]}"; do
    printf "${x}\t"
    printf "${!x}${x}${RESET}\t"
    printf "${!x}${BOLD}${x}${RESET}\t"
    printf "${!x}${DIM}${x}${RESET}\t"
    printf "${!x}${UNDERLINE}${x}${RESET}\t"
    printf "${!x}${BLINK}${x}${RESET}\t"
    printf "${!x}${REVERSE}${x}${RESET}\t"
    printf "${!x}${HIDDEN}${x}${RESET}\n"
  done
  echo ${RESET}

  echo "Foreground colors"
  for x in {0..255}; do
    printf "$(FG $x)%5d " $x
    if (( $x%8 == 7 )); then
      echo $RESET
    fi
  done
  echo $RESET

  echo "Background colors"
  echo -n $WHITE
  for x in {0..255}; do
    printf "$(BG $x)%5d " $x
    if (( $x%8 == 7 )); then
      echo $RESET
    fi
  done
  echo $RESET
}

color_setup