#!/usr/bin/env bash
#J.U.S.T. - J.U.S.T. uncomplicated simple tasking

set -euE

function print_error(){ echo "$1: line $2: Returned $?";}
trap 'print_error "${BASH_SOURCE[0]}" "${LINENO}"' ERR

VSI_SCRIPT_DIR=$(cd "$(dirname "${BASH_SOURCE[0]}")"; pwd)

source "${VSI_SCRIPT_DIR}/just_functions.bsh"

: ${JUSTFILE=Justfile}
load_justfile "${JUSTFILE}"

if [ "${JUST_DIR-}" == "" ]; then
  echo "Can't find a suitable configuration file in this directory or any"
  echo "parent. Are you in the right directory?"
  echo
  echo "Supported filenames: ${JUSTFILE}"
  exit 1
fi

justify ${@+"${@}"}
