#!/usr/bin/env bash

. "$(dirname ${BASH_SOURCE[0]})/testlib.sh"

VSI_COMMON_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.."; pwd)"
. "${VSI_COMMON_DIR}/linux/just_common.bsh"

begin_test "just parse helps"
(
  JUST_HELP_SEPARATOR='#@#'
  set -eu
  s=$'what) #huh\n'
  s+=$'a|b|c) # test\n'
  s+=$'mix|mix_ed|mixed) # test\n'
  s+=$'mix_ed|mixed) # test\n'
  s+=$'mix|mix_ed) # test\n'
  s+='d|\\\ne) # foo\n'
  _just_parse_helps <(printf "${s}")
)
end_test