#!/usr/bin/env bash

. "$(dirname ${BASH_SOURCE[0]})/testlib.sh"

setup()
{
  track_touched_files
}

begin_test "No touch files"
(
  :
)
end_test

begin_test "Touch files"
{
  touch "${TRASHDIR}/test1"
}
end_test

begin_test "Touch files in subshell"
(
  touch "${TRASHDIR}/test2"
  touch "${TRASHDIR}/test3"
  touch "${TRASHDIR}/test4"
)
end_test

teardown()
{
  set -eu
  [ ! -e "${TRASHDIR}/test1" ]
  [ ! -e "${TRASHDIR}/test2" ]
  [ ! -e "${TRASHDIR}/test3" ]
  [ ! -e "${TRASHDIR}/test4" ]
}